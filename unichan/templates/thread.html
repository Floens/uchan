{% extends "base.html" %}

{% block title %}Thread view{% endblock %}

{% import "widget/post.html" as post_widget %}
{% import "widget/post_form.html" as post_form_widget %}
{% import "widget/post_manage.html" as post_manage_widget %}

{% block content %}
    <h2>Viewing thread</h2>
    [<a href="{{ url_for('board', board_name=thread.board.name) }}">Back</a>]

    <hr class="content-divider">

    <div class="motd">{{ site_config.motd }}</div>

    <hr class="content-divider">

    {{ post_manage_widget.render_begin() }}
    {% for post_item in thread.posts %}
        {{ post_widget.render(post_item, thread_view=True) }}
    {% endfor %}

    <hr class="content-divider">

    {{ post_manage_widget.render_end() }}

    <hr class="content-divider">

    {{ post_form_widget.render(thread.board, thread, file_field=board_config.file_posting_enabled) }}
    <br>
    [<a href="{{ url_for('board', board_name=thread.board.name) }}">Back</a>]
{% endblock %}

{% block javascripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/thread.js') }}"></script>
{% endblock %}
